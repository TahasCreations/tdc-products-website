(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{6776:function(e,t,s){Promise.resolve().then(s.bind(s,1147))},1147:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7573),r=s(7653),l=s(1695),i=s(8146),n=s(7747),c=s(8602),d=s(9753),x=s(2940),o=s(6896),m=s(3333),u=s(4647),h=s(3078);function p(){(0,l.useRouter)();let[e,t]=(0,r.useState)([]),[s,p]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[j,f]=(0,r.useState)(""),[b,v]=(0,r.useState)("all"),[N,w]=(0,r.useState)("all"),[k,S]=(0,r.useState)("createdAt"),[C,D]=(0,r.useState)("desc"),[E,T]=(0,r.useState)(1),[Z,A]=(0,r.useState)(1),[F,R]=(0,r.useState)(0),[P,Y]=(0,r.useState)([]),_=async()=>{try{p(!0),y("");let e=new URLSearchParams({page:E.toString(),limit:"20",sortBy:k,sortOrder:C});j&&e.append("search",j),"all"!==b&&e.append("status",b),"all"!==N&&e.append("category",N);let s=await fetch("/api/products/simple?".concat(e)),a=await s.json();a.success?(t(a.data.products),A(a.data.pagination.totalPages),R(a.data.pagination.totalCount)):y("\xdcr\xfcnler y\xfcklenirken bir hata oluştu")}catch(e){y("Bağlantı hatası oluştu")}finally{p(!1)}},L=async()=>{try{let e=await fetch("/api/categories/simple"),t=await e.json();t.success&&Y(t.data)}catch(e){}};(0,r.useEffect)(()=>{_()},[E,k,C,b,N]),(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{""!==j&&(T(1),_())},500);return()=>clearTimeout(e)},[j]);let z=async e=>{if(confirm("Bu \xfcr\xfcn\xfc silmek istediğinizden emin misiniz?"))try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok?_():alert("\xdcr\xfcn silinirken bir hata oluştu")}catch(e){alert("Bağlantı hatası oluştu")}},B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TRY";return new Intl.NumberFormat("tr-TR",{style:"currency",currency:t}).format(e)},K=e=>new Date(e).toLocaleDateString("tr-TR"),M=e=>{switch(e.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800";case"inactive":return"bg-red-100 text-red-800";case"archived":return"bg-purple-100 text-purple-800"}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\xdcr\xfcn Y\xf6netimi"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"T\xfcm \xfcr\xfcnleri g\xf6r\xfcnt\xfcleyin ve y\xf6netin"})]}),(0,a.jsxs)(i.default,{href:"/admin/products/new",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),"Yeni \xdcr\xfcn"]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arama"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),placeholder:"\xdcr\xfcn adı, a\xe7ıklama veya marka...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),(0,a.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"T\xfcm\xfc"}),(0,a.jsx)("option",{value:"active",children:"Aktif"}),(0,a.jsx)("option",{value:"draft",children:"Taslak"}),(0,a.jsx)("option",{value:"inactive",children:"Pasif"}),(0,a.jsx)("option",{value:"archived",children:"Arşivlenmiş"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"T\xfcm\xfc"}),P.map(e=>(0,a.jsx)("option",{value:e.slug,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sıralama"}),(0,a.jsxs)("select",{value:"".concat(k,"-").concat(C),onChange:e=>{let[t,s]=e.target.value.split("-");S(t),D(s)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"createdAt-desc",children:"En Yeni"}),(0,a.jsx)("option",{value:"createdAt-asc",children:"En Eski"}),(0,a.jsx)("option",{value:"name-asc",children:"A-Z"}),(0,a.jsx)("option",{value:"name-desc",children:"Z-A"}),(0,a.jsx)("option",{value:"price-asc",children:"Fiyat (D\xfcş\xfck-Y\xfcksek)"}),(0,a.jsx)("option",{value:"price-desc",children:"Fiyat (Y\xfcksek-D\xfcş\xfck)"}),(0,a.jsx)("option",{value:"viewCount-desc",children:"En \xc7ok G\xf6r\xfcnt\xfclenen"}),(0,a.jsx)("option",{value:"purchaseCount-desc",children:"En \xc7ok Satılan"})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Toplam ",F," \xfcr\xfcn bulundu"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Filtreler aktif"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:s?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcnler y\xfckleniyor..."})]}):g?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:g}),(0,a.jsx)("button",{onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Tekrar Dene"})]}):0===e.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"\xdcr\xfcn bulunamadı"}),(0,a.jsxs)(i.default,{href:"/admin/products/new",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),"İlk \xdcr\xfcn\xfc Ekle"]})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdcr\xfcn"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Satıcı"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fiyat"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stok"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İstatistikler"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:e.images&&e.images.length>0?(0,a.jsx)("img",{className:"h-12 w-12 rounded-lg object-cover",src:e.images[0],alt:e.name}):(0,a.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"\uD83D\uDCE6"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["SKU: ",e.slug]}),e.isFeatured&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"⭐ \xd6ne \xc7ıkan"})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.category.name})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:"Satıcı"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:B(e.price,e.currency)}),e.comparePrice&&(0,a.jsx)("div",{className:"text-sm text-gray-500 line-through",children:B(e.comparePrice,e.currency)})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.stockQuantity})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(M(e.status)),children:e.status})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,a.jsxs)("div",{children:["\uD83D\uDC41️ ",e.viewCount]}),(0,a.jsxs)("div",{children:["\uD83D\uDED2 ",e.purchaseCount]}),(0,a.jsxs)("div",{children:["⭐ ",e.averageRating.toFixed(1)," (",e.totalReviews,")"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(e.createdAt)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)(i.default,{href:"/products/".concat(e.slug),className:"text-blue-600 hover:text-blue-900",title:"G\xf6r\xfcnt\xfcle",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.default,{href:"/admin/products/".concat(e.id,"/edit"),className:"text-indigo-600 hover:text-indigo-900",title:"D\xfczenle",children:(0,a.jsx)(o.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>z(e.id),className:"text-red-600 hover:text-red-900",title:"Sil",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),Z>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-700",children:(0,a.jsxs)("span",{children:["Sayfa ",E," / ",Z," (Toplam ",F," \xfcr\xfcn)"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>T(Math.max(1,E-1)),disabled:1===E,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),Array.from({length:Math.min(5,Z)},(e,t)=>{let s=t+1;return(0,a.jsx)("button",{onClick:()=>T(s),className:"px-3 py-2 text-sm font-medium rounded-md ".concat(E===s?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"),children:s},s)}),(0,a.jsx)("button",{onClick:()=>T(Math.min(Z,E+1)),disabled:E===Z,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})]})]})]})}}},function(e){e.O(0,[216,744],function(){return e(e.s=6776)}),_N_E=e.O()}]);