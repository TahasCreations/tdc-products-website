-- Muhasebe Sistemi Seed Data
-- TDHP (Tek Düzen Hesap Planı) ve örnek veriler

-- 1. Varsayılan şirket oluştur
INSERT INTO companies (id, name, tax_number, tax_office, address, phone, email, currency_base, fiscal_year_start) 
VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  'TDC Products Ltd. Şti.',
  '1234567890',
  'Kadıköy Vergi Dairesi',
  'Moda Mahallesi, Bahariye Caddesi No:123, Kadıköy/İstanbul',
  '+90 216 123 45 67',
  'info@tdcproducts.com',
  'TRY',
  '2024-01-01'
);

-- 2. TDHP Hesap Planı (Ana Hesaplar)
INSERT INTO accounts (id, company_id, code, name, type, parent_id, level, is_leaf, balance_type) VALUES
-- 1. DÖNEN VARLIKLAR
('10000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '100', 'DÖNEN VARLIKLAR', 'ASSET', NULL, 1, false, 'DEBIT'),
('10000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '101', 'HAZIR DEĞERLER', 'ASSET', '10000000-0000-0000-0000-000000000001', 2, false, 'DEBIT'),
('10000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '102', 'BANKALAR', 'ASSET', '10000000-0000-0000-0000-000000000002', 3, true, 'DEBIT'),
('10000000-0000-0000-0000-000000000004', '550e8400-e29b-41d4-a716-446655440000', '103', 'VERİLEN ÇEKLER VE ÖDEME EMİRLERİ', 'ASSET', '10000000-0000-0000-0000-000000000002', 3, true, 'DEBIT'),
('10000000-0000-0000-0000-000000000005', '550e8400-e29b-41d4-a716-446655440000', '120', 'ALICILAR', 'ASSET', '10000000-0000-0000-0000-000000000001', 2, true, 'DEBIT'),
('10000000-0000-0000-0000-000000000006', '550e8400-e29b-41d4-a716-446655440000', '153', 'TİCARİ MALLAR', 'ASSET', '10000000-0000-0000-0000-000000000001', 2, true, 'DEBIT'),
('10000000-0000-0000-0000-000000000007', '550e8400-e29b-41d4-a716-446655440000', '191', 'İNDİRİLECEK KDV', 'ASSET', '10000000-0000-0000-0000-000000000001', 2, true, 'DEBIT'),

-- 2. DURAN VARLIKLAR
('20000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '200', 'DURAN VARLIKLAR', 'ASSET', NULL, 1, false, 'DEBIT'),
('20000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '250', 'MADDİ DURAN VARLIKLAR', 'ASSET', '20000000-0000-0000-0000-000000000001', 2, false, 'DEBIT'),
('20000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '254', 'TRAFİK VE TAŞITLAR', 'ASSET', '20000000-0000-0000-0000-000000000002', 3, true, 'DEBIT'),
('20000000-0000-0000-0000-000000000004', '550e8400-e29b-41d4-a716-446655440000', '255', 'DEMİRBAŞLAR', 'ASSET', '20000000-0000-0000-0000-000000000002', 3, true, 'DEBIT'),

-- 3. KISA VADELİ YABANCI KAYNAKLAR
('30000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '300', 'KISA VADELİ YABANCI KAYNAKLAR', 'LIABILITY', NULL, 1, false, 'CREDIT'),
('30000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '320', 'SATICILAR', 'LIABILITY', '30000000-0000-0000-0000-000000000001', 2, true, 'CREDIT'),
('30000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '391', 'HESAPLANAN KDV', 'LIABILITY', '30000000-0000-0000-0000-000000000001', 2, true, 'CREDIT'),

-- 4. UZUN VADELİ YABANCI KAYNAKLAR
('40000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '400', 'UZUN VADELİ YABANCI KAYNAKLAR', 'LIABILITY', NULL, 1, false, 'CREDIT'),
('40000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '420', 'BANKALAR KREDİLERİ', 'LIABILITY', '40000000-0000-0000-0000-000000000001', 2, true, 'CREDIT'),

-- 5. ÖZ KAYNAKLAR
('50000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '500', 'ÖZ KAYNAKLAR', 'EQUITY', NULL, 1, false, 'CREDIT'),
('50000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '590', 'ÖDENMİŞ SERMAYE', 'EQUITY', '50000000-0000-0000-0000-000000000001', 2, true, 'CREDIT'),
('50000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '690', 'DÖNEM NET KARI (ZARARI)', 'EQUITY', '50000000-0000-0000-0000-000000000001', 2, true, 'CREDIT'),

-- 6. GELİR TABLOSU HESAPLARI
('60000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '600', 'YURTİÇİ SATIŞLAR', 'REVENUE', NULL, 1, true, 'CREDIT'),
('60000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '610', 'SATIŞ İNDİRİMLERİ', 'REVENUE', NULL, 1, true, 'DEBIT'),
('60000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '620', 'SATIŞLARIN MALİYETİ', 'EXPENSE', NULL, 1, true, 'DEBIT'),
('60000000-0000-0000-0000-000000000004', '550e8400-e29b-41d4-a716-446655440000', '621', 'SATILAN MALLARIN MALİYETİ', 'EXPENSE', '60000000-0000-0000-0000-000000000003', 2, true, 'DEBIT'),

-- 7. GİDER HESAPLARI
('70000000-0000-0000-0000-000000000001', '550e8400-e29b-41d4-a716-446655440000', '700', 'ARAŞTIRMA VE GELİŞTİRME GİDERLERİ', 'EXPENSE', NULL, 1, true, 'DEBIT'),
('70000000-0000-0000-0000-000000000002', '550e8400-e29b-41d4-a716-446655440000', '720', 'PAZARLAMA SATIŞ VE DAĞITIM GİDERLERİ', 'EXPENSE', NULL, 1, true, 'DEBIT'),
('70000000-0000-0000-0000-000000000003', '550e8400-e29b-41d4-a716-446655440000', '730', 'GENEL YÖNETİM GİDERLERİ', 'EXPENSE', NULL, 1, true, 'DEBIT'),
('70000000-0000-0000-0000-000000000004', '550e8400-e29b-41d4-a716-446655440000', '780', 'FİNANSMAN GİDERLERİ', 'EXPENSE', NULL, 1, true, 'DEBIT');

-- 3. Vergi ayarları
INSERT INTO tax_configs (company_id, kdv_rates, withholding_presets) VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  '{"1": 1, "8": 8, "18": 18, "20": 20}',
  '{"5": 5, "10": 10, "15": 15, "20": 20}'
);

-- 4. Örnek kasa hesabı
INSERT INTO cashboxes (company_id, name, currency) VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  'Ana Kasa',
  'TRY'
);

-- 5. Örnek banka hesabı
INSERT INTO bank_accounts (company_id, iban, bank_name, account_name, currency) VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  'TR1234567890123456789012345',
  'Türkiye İş Bankası',
  'TDC Products Ana Hesap',
  'TRY'
);

-- 6. Örnek cari hesaplar
INSERT INTO contacts (company_id, type, code, name, tax_number, address, phone, email) VALUES
('550e8400-e29b-41d4-a716-446655440000', 'CUSTOMER', 'C001', 'ABC Teknoloji A.Ş.', '1234567890', 'İstanbul', '+90 212 123 45 67', 'info@abcteknoloji.com'),
('550e8400-e29b-41d4-a716-446655440000', 'CUSTOMER', 'C002', 'XYZ Yazılım Ltd.', '0987654321', 'Ankara', '+90 312 987 65 43', 'info@xyzyazilim.com'),
('550e8400-e29b-41d4-a716-446655440000', 'SUPPLIER', 'S001', 'DEF Tedarik A.Ş.', '1122334455', 'İzmir', '+90 232 555 44 33', 'info@deftedarik.com');

-- 7. Örnek stok kalemleri
INSERT INTO stock_items (company_id, sku, name, unit, accounts) VALUES
('550e8400-e29b-41d4-a716-446655440000', 'SKU001', '3D Printer Filament PLA', 'kg', '{"asset": "153", "cogs": "621"}'),
('550e8400-e29b-41d4-a716-446655440000', 'SKU002', '3D Printer Nozzle 0.4mm', 'adet', '{"asset": "153", "cogs": "621"}'),
('550e8400-e29b-41d4-a716-446655440000', 'SKU003', '3D Printer Bed 220x220', 'adet', '{"asset": "153", "cogs": "621"}');

-- 8. Örnek açılış fişi (2024 yılı)
INSERT INTO journal_entries (company_id, date, no, description, period, status, total_debit, total_credit, created_by) VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  '2024-01-01',
  '2024-001',
  '2024 Yılı Açılış Fişi',
  '2024-01',
  'POSTED',
  100000.00,
  100000.00,
  NULL
);

-- Açılış fişi satırları
INSERT INTO journal_lines (journal_entry_id, account_id, debit, credit, description) VALUES
-- Kasa ve banka hesapları (borç)
((SELECT id FROM journal_entries WHERE no = '2024-001'), '10000000-0000-0000-0000-000000000003', 50000.00, 0, 'Açılış - Kasa'),
((SELECT id FROM journal_entries WHERE no = '2024-001'), '10000000-0000-0000-0000-000000000003', 50000.00, 0, 'Açılış - Banka'),
-- Ödenmiş sermaye (alacak)
((SELECT id FROM journal_entries WHERE no = '2024-001'), '50000000-0000-0000-0000-000000000002', 0, 100000.00, 'Açılış - Ödenmiş Sermaye');
