# ğŸ§¹ TDC Products Website - KapsamlÄ± Veri Temizleme Rehberi

## ğŸ“‹ Genel BakÄ±ÅŸ

Bu rehber, admin panelindeki **TÃœM modÃ¼llerin demo verilerini temizlemek** iÃ§in adÄ±m adÄ±m talimatlar iÃ§erir.

## âš ï¸ Ã–NEMLI UYARILAR

1. **Bu iÅŸlem geri alÄ±namaz!** TÃ¼m veriler kalÄ±cÄ± olarak silinecektir.
2. Temizlemeden Ã¶nce **mutlaka veritabanÄ± yedeÄŸi alÄ±n**.
3. Bu iÅŸlem yalnÄ±zca **geliÅŸtirme/test ortamlarÄ±nda** kullanÄ±lmalÄ±dÄ±r.
4. CanlÄ± sistemde kullanmadan Ã¶nce **test edin**.

## ğŸ“Š Temizlenecek ModÃ¼ller

### 1. ÃœrÃ¼n YÃ¶netimi
- âœ… Kategoriler
- âœ… ÃœrÃ¼nler
- âœ… ÃœrÃ¼n YorumlarÄ±
- âœ… ÃœrÃ¼n Filtreleri
- âœ… SatÄ±cÄ±lar

### 2. SipariÅŸ YÃ¶netimi
- âœ… SipariÅŸler
- âœ… SipariÅŸ Kalemleri
- âœ… SipariÅŸ Ã–demeleri
- âœ… SipariÅŸ KargolarÄ±
- âœ… SipariÅŸ Durumu GeÃ§miÅŸi

### 3. MÃ¼ÅŸteri YÃ¶netimi (CRM)
- âœ… MÃ¼ÅŸteriler
- âœ… MÃ¼ÅŸteri Profilleri
- âœ… MÃ¼ÅŸteri Ä°letiÅŸimleri
- âœ… MÃ¼ÅŸteri GÃ¶revleri
- âœ… MÃ¼ÅŸteri FÄ±rsatlarÄ±
- âœ… MÃ¼ÅŸteri Segmentleri
- âœ… MÃ¼ÅŸteri Etiketleri

### 4. Blog YÃ¶netimi
- âœ… Blog YazÄ±larÄ±
- âœ… Blog YorumlarÄ±
- âœ… Yorum BeÄŸenileri

### 5. Medya YÃ¶netimi
- âœ… Medya DosyalarÄ±
- âœ… Medya KlasÃ¶rleri

### 6. Visual Site Builder
- âœ… Site SayfalarÄ±
- âœ… Site ÅablonlarÄ±
- âœ… Site BileÅŸenleri

### 7. Pazarlama & SEO
- âœ… Kampanyalar
- âœ… E-posta KampanyalarÄ±
- âœ… E-posta ÅablonlarÄ±
- âœ… SEO AyarlarÄ±
- âœ… Anahtar Kelimeler
- âœ… Backlink'ler
- âœ… Sosyal Medya HesaplarÄ±
- âœ… Sosyal Medya GÃ¶nderileri
- âœ… A/B Testleri
- âœ… Analytics Verileri

### 8. Kuponlar & Promosyonlar
- âœ… Kuponlar
- âœ… Kupon KullanÄ±mlarÄ±
- âœ… Promosyonlar

### 9. Wishlist
- âœ… Ä°stek Listesi KayÄ±tlarÄ±

### 10. Stok & Envanter
- âœ… Envanter KayÄ±tlarÄ±
- âœ… Stok Hareketleri
- âœ… Stok Transferleri
- âœ… SatÄ±n Alma SipariÅŸleri
- âœ… TedarikÃ§iler
- âœ… Depo KonumlarÄ±
- âœ… Stok UyarÄ±larÄ±

### 11. Muhasebe Sistemi
- âœ… Åirketler
- âœ… Hesap PlanÄ±
- âœ… Yevmiye FiÅŸleri
- âœ… Yevmiye SatÄ±rlarÄ±
- âœ… Faturalar
- âœ… Fatura SatÄ±rlarÄ±
- âœ… Cari Hesaplar
- âœ… Stok Kalemleri
- âœ… Banka HesaplarÄ±
- âœ… Banka Hareketleri
- âœ… Kasa HesaplarÄ±
- âœ… Kasa Hareketleri
- âœ… Vergi AyarlarÄ±
- âœ… DÃ¶nem Kilitleri
- âœ… Audit LoglarÄ±

### 12. Ä°nsan KaynaklarÄ± (HR)
- âœ… Departmanlar
- âœ… Pozisyonlar
- âœ… Ã‡alÄ±ÅŸanlar
- âœ… Bordro KayÄ±tlarÄ±
- âœ… Ä°zin TÃ¼rleri
- âœ… Ä°zin Talepleri
- âœ… EÄŸitim ProgramlarÄ±
- âœ… Performans DeÄŸerlendirmeleri

### 13. Ä°ade YÃ¶netimi
- âœ… Ä°adeler
- âœ… Ä°ade Kalemleri
- âœ… Ä°ade KurallarÄ±

### 14. Settlement (Ã–deme YÃ¶netimi)
- âœ… Settlement KayÄ±tlarÄ±
- âœ… Komisyon KurallarÄ±
- âœ… Komisyon HesaplamalarÄ±
- âœ… Payout KayÄ±tlarÄ±

### 15. Influencer YÃ¶netimi
- âœ… Influencer'lar
- âœ… Influencer BaÅŸvurularÄ±
- âœ… Ä°ÅŸbirlikleri

### 16. AI Lab & Otomasyon
- âœ… AI Ã–nerileri
- âœ… OCR Ä°ÅŸlemleri
- âœ… KDV Asistan GeÃ§miÅŸi

### 17. Abonelikler
- âœ… Abonelikler
- âœ… Abonelik GeÃ§miÅŸi
- âœ… Abonelik PlanlarÄ± (Demo)

### 18. Bildirimler & Loglar
- âœ… Bildirimler
- âœ… Sistem LoglarÄ±
- âœ… Aktivite LoglarÄ±

## ğŸš€ Temizleme AdÄ±mlarÄ±

### AdÄ±m 1: VeritabanÄ± YedeÄŸi AlÄ±n

**PostgreSQL iÃ§in:**
```bash
# Supabase/PostgreSQL yedeÄŸi
pg_dump -h [host] -U [user] -d [database] -F c -b -v -f backup_$(date +%Y%m%d_%H%M%S).dump

# Ã–rnek:
pg_dump -h db.xxxxxxxxx.supabase.co -U postgres -d postgres -F c -b -v -f backup_$(date +%Y%m%d_%H%M%S).dump
```

**Supabase Dashboard Ã¼zerinden:**
1. Supabase Dashboard'a gidin
2. Settings > Database > Database Backups
3. "Start a backup" butonuna tÄ±klayÄ±n

### AdÄ±m 2: Mevcut Verileri Kontrol Edin

```bash
# Supabase SQL Editor'da veya psql ile
psql -h [host] -U [user] -d [database] -f check-database-data.sql
```

Bu komut size ÅŸu bilgileri verecektir:
- Her modÃ¼lde kaÃ§ kayÄ±t olduÄŸu
- Demo verilerinin sayÄ±sÄ±
- Toplam veritabanÄ± boyutu

### AdÄ±m 3: Temizleme Scriptini Ã‡alÄ±ÅŸtÄ±rÄ±n

**SeÃ§enek 1: Supabase SQL Editor'da**
1. Supabase Dashboard > SQL Editor'a gidin
2. `COMPREHENSIVE-DATA-CLEANUP.sql` dosyasÄ±nÄ± aÃ§Ä±n
3. SQL kodunu kopyalayÄ±n ve SQL Editor'a yapÄ±ÅŸtÄ±rÄ±n
4. "Run" butonuna tÄ±klayÄ±n
5. Ä°ÅŸlem tamamlanana kadar bekleyin

**SeÃ§enek 2: Terminal/CMD Ã¼zerinden**
```bash
# Windows PowerShell
$env:PGPASSWORD="your_password"; psql -h [host] -U postgres -d postgres -f COMPREHENSIVE-DATA-CLEANUP.sql

# Linux/Mac
PGPASSWORD='your_password' psql -h [host] -U postgres -d postgres -f COMPREHENSIVE-DATA-CLEANUP.sql
```

**SeÃ§enek 3: Node.js Script ile**
```bash
node cleanup-database.js
```

### AdÄ±m 4: Temizlik SonrasÄ± DoÄŸrulama

```bash
# Verilerin temizlendiÄŸini doÄŸrulayÄ±n
psql -h [host] -U [user] -d [database] -f check-database-data.sql
```

TÃ¼m modÃ¼llerde `0` kayÄ±t gÃ¶rmelisiniz.

### AdÄ±m 5: Sequence'leri SÄ±fÄ±rlayÄ±n

Script otomatik olarak sÄ±fÄ±rlar, ancak kontrol etmek iÃ§in:

```sql
-- SipariÅŸ numarasÄ± sequence
SELECT nextval('order_number_seq'); -- 1 olmalÄ±

-- Fatura numarasÄ± sequence
SELECT nextval('invoice_number_seq'); -- 1 olmalÄ±
```

## ğŸ“ Temizleme SonrasÄ± Ä°ÅŸlemler

### 1. Admin KullanÄ±cÄ±sÄ± OluÅŸturun (Gerekirse)

```sql
-- Admin kullanÄ±cÄ±sÄ± oluÅŸtur
INSERT INTO admin_users (email, full_name, role, is_active)
VALUES ('admin@tdcproducts.com', 'Admin User', 'admin', true);
```

### 2. Temel AyarlarÄ± YapÄ±n

```sql
-- VarsayÄ±lan kategoriler ekle (isteÄŸe baÄŸlÄ±)
INSERT INTO categories (name, slug, is_active) VALUES
('Elektronik', 'elektronik', true),
('Ev & YaÅŸam', 'ev-yasam', true),
('Moda', 'moda', true);

-- Site ayarlarÄ±nÄ± kontrol et
SELECT * FROM site_settings WHERE is_public = true;
```

### 3. Ã–deme ve Kargo AyarlarÄ±nÄ± Kontrol Edin

```sql
-- Ã–deme yÃ¶ntemlerini kontrol et
SELECT * FROM payment_methods WHERE is_active = true;

-- Kargo firmalarÄ±nÄ± kontrol et
SELECT * FROM shipping_companies WHERE is_active = true;
```

## ğŸ” Sorun Giderme

### Hata: "relation does not exist"

**Ã‡Ã¶zÃ¼m:** BazÄ± tablolar veritabanÄ±nÄ±zda mevcut olmayabilir. Scripti dÃ¼zenleyin ve o tablolarÄ± yorum satÄ±rÄ± yapÄ±n.

```sql
-- Mevcut olmayan tablo iÃ§in:
-- DELETE FROM non_existing_table;
```

### Hata: "permission denied"

**Ã‡Ã¶zÃ¼m:** VeritabanÄ± kullanÄ±cÄ±nÄ±zÄ±n yeterli yetkisi olmayabilir. SÃ¼per kullanÄ±cÄ± ile baÄŸlanÄ±n:

```bash
psql -h [host] -U postgres -d postgres
```

### Hata: "violates foreign key constraint"

**Ã‡Ã¶zÃ¼m:** Script CASCADE silme kullanÄ±yor, ancak bazÄ± durumlarda sÄ±ralama Ã¶nemli. Hata veren tablolarÄ± en sona taÅŸÄ±yÄ±n.

### Ä°ÅŸlem Ã‡ok Uzun SÃ¼rÃ¼yor

**Ã‡Ã¶zÃ¼m:** BÃ¼yÃ¼k tablolar iÃ§in batch silme kullanÄ±n:

```sql
-- 10,000 kayÄ±t batch'lerle sil
DO $$
DECLARE
    deleted_count INTEGER;
BEGIN
    LOOP
        DELETE FROM large_table WHERE id IN (
            SELECT id FROM large_table LIMIT 10000
        );
        GET DIAGNOSTICS deleted_count = ROW_COUNT;
        EXIT WHEN deleted_count = 0;
        RAISE NOTICE 'Deleted % rows', deleted_count;
    END LOOP;
END $$;
```

## ğŸ“Š Ä°ÅŸlem SÃ¼resi Tahmini

| KayÄ±t SayÄ±sÄ± | Tahmini SÃ¼re |
|-------------|-------------|
| < 1,000 | 1-2 dakika |
| 1,000 - 10,000 | 2-5 dakika |
| 10,000 - 100,000 | 5-15 dakika |
| > 100,000 | 15+ dakika |

## âœ… Kontrol Listesi

- [ ] VeritabanÄ± yedeÄŸi alÄ±ndÄ±
- [ ] Mevcut veriler kontrol edildi
- [ ] Temizleme scripti Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±
- [ ] Temizlik sonrasÄ± doÄŸrulama yapÄ±ldÄ±
- [ ] Sequence'ler sÄ±fÄ±rlandÄ±
- [ ] Admin kullanÄ±cÄ±sÄ± oluÅŸturuldu
- [ ] Temel ayarlar yapÄ±ldÄ±
- [ ] Uygulama test edildi

## ğŸ¯ SonuÃ§

Bu iÅŸlemden sonra:
- âœ… TÃ¼m demo verileri temizlenmiÅŸ olacak
- âœ… VeritabanÄ± sÄ±fÄ±r durumda olacak
- âœ… Yeni veriler eklenmeye hazÄ±r
- âœ… Admin paneli temiz bir durumda

## ğŸ†˜ Destek

Sorun yaÅŸÄ±yorsanÄ±z:
1. Hata mesajÄ±nÄ± kaydedin
2. Hangi adÄ±mda hata aldÄ±ÄŸÄ±nÄ±zÄ± not edin
3. VeritabanÄ± loglarÄ±nÄ± kontrol edin
4. Gerekirse yedeÄŸi geri yÃ¼kleyin

## ğŸ“š Ä°lgili Dosyalar

- `COMPREHENSIVE-DATA-CLEANUP.sql` - Ana temizleme scripti
- `check-database-data.sql` - Veri kontrol scripti
- `cleanup-database.js` - Node.js temizleme scripti
- `ADMIN-PANEL-TEMIZLIK-OZETI.md` - DetaylÄ± temizlik raporu

---

**Son GÃ¼ncelleme:** 2025-10-25
**Versiyon:** 1.0

